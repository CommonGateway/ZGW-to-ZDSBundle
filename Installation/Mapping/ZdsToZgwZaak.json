{
  "title": "ZdsToZgwRol",
  "$id": "https://zds.nl/mapping/zds.ZgwZaakToZds.mapping.json",
  "$schema": "https://docs.commongateway.nl/schemas/Mapping.schema.json",
  "version": "0.0.6",
  "passTrough": false,
  "mapping": {
    "_expand.zaak.identificatie": "Body.ZakLk01.object.identificatie",
    "_expand.zaak.bronorganisatie": "999990674",
    "_expand.zaak.omschrijving": "Body.ZakLk01.object.omschrijving",
    "_expand.zaak.toelichting": "Body.ZakLk01.object.toelichting",
    "_expand.zaak.zaaktype": "{% set filteredZaaktypen = zaaktypen|filter(v => v.identificatie == Body.ZakLk01.object.isVan.gerelateerde.code)|filter(v => v.beginGeldigheid < 'now'|date('Y-m-d'))|filter(v => v.eindeGeldigheid is not defined or v.eindeGeldigheid|date > 'now'|date)%}{{ filteredZaaktypen|column('url')[0] }}",
    "_expand.zaak.verantwoordelijkeOrganisatie": "9999990674",
    "_expand.zaak.startdatum": "Body.ZakLk01.object.startdatum",
    "_expand.zaak.registratiedatum": "Body.ZakLk01.object.registratiedatum",
    "_expand.zaak.einddatumGepland": "Body.ZakLk01.object.einddatumGepland",
    "_expand.zaak.uiterlijkeEinddatumAfdoening": "Body.ZakLk01.object.uiterlijkeEinddatum",
    "_expand.zaak.publicatiedatum": "Body.ZakLk01.object.publicatiedatum",
    "_expand.zaak.betalingsindicatie": "Body.ZakLk01.object.betalingsIndicatie",
    "_expand.zaak.laatsteBetaaldatum": "Body.ZakLk01.object.laatsteBetaaldatum",
    "_expand.zaak.productenOfDiensten": [],
    "_expand.zaak._expand.eigenschappen": "{% set filteredZaaktypen = zaaktypen|filter(v => v.identificatie == Body.ZakLk01.object.isVan.gerelateerde.code)|filter(v => v.beginGeldigheid < 'now'|date('Y-m-d'))|filter(v => v.eindeGeldigheid is not defined or v.eindeGeldigheid|date > 'now'|date)%}[{% for element in extraElement %}{% if not loop.first %},{% endif %}{{ '{\"waarde\": \"' ~ element.# ~\", \"eigenschap\": \"' ~ (eigenschappen|filter(v => v.url in filteredZaaktypen|column('eigenschappen')[0])|filter(v => v.naam == element['@naam'])).0.url ~ '\"}' }}{% endfor %}]",
    "betrokkeneType": "{{ (Body.ZakLk01.object.heeftAlsInitiator.gerelateerde|keys).0|u.snake }}",
    "rolType": "{% set filteredZaaktypen = zaaktypen|filter(v => v.identificatie == Body.ZakLk01.object.isVan.gerelateerde.code)|filter(v => v.beginGeldigheid < 'now'|date('Y-m-d'))|filter(v => v.eindeGeldigheid is not defined or v.eindeGeldigheid|date > 'now'|date)%}{{ (roltypen|filter(v => v.url in filteredZaaktypen|column('roltypen')[0])|filter(v => v.omschrijvingGeneriek == 'initiator')).0.url }}",
    "rolToelichting": "",
    "betrokkeneIdentificatie.inpBsn": "{{ Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon['inp.bsn'] }}",
    "betrokkeneIdentificatie.geslachtsnaam": "Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.geslachtsnaam",
    "betrokkeneIdentificatie.voorvoegselGeslachtsnaam": "Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.voorvoegselGeslachtsnaam",
    "betrokkeneIdentificatie.voorletters": "Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.voorletters",
    "betrokkeneIdentificatie.voornamen": "Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.voornamen",
    "betrokkeneIdentificatie.geslachtsaanduiding": "Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.geslachtsaanduiding",
    "betrokkeneIdentificatie.geboortedatum": "{{ (Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.geboortedatum[:2] ~  '-' ~ Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.geboortedatum[2:2] ~ '-' ~ Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.geboortedatum[4:2])|date('Y-m-d')}}",
    "betrokkeneIdentificatie.verblijfsadres.aoaIdentificatie": "{{ Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.verblijfsadres['aoa.identificatie'] }}",
    "betrokkeneIdentificatie.verblijfsadres.wplWoonplaatsNaam": "{{ Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.verblijfsadres['wpl.woonplaatsNaam'] }}",
    "betrokkeneIdentificatie.verblijfsadres.gorOpenbareRuimteNaam": "{{ Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.verblijfsadres['gor.openbareRuimteNaam'] }}",
    "betrokkeneIdentificatie.verblijfsadres.aoaPostcode": "{{ Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.verblijfsadres['aoa.postcode'] }}",
    "betrokkeneIdentificatie.verblijfsadres.aoaHuisnummer": "{{ Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.verblijfsadres['aoa.huisnummer'] }}",
    "betrokkeneIdentificatie.verblijfsadres.aoaHuisletter": "{{ Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.verblijfsadres['aoa.huisletter'] }}",
    "betrokkeneIdentificatie.verblijfsadres.aoaHuisnummertoevoeging": "{{ Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.verblijfsadres['aoa.huisnummertoevoeging'] }}",
    "betrokkeneIdentificatie.verblijfsadres.inpLocatiebeschrijving": "{{ Body.ZakLk01.object.heeftAlsInitiator.gerelateerde.natuurlijkPersoon.verblijfsadres['inp.locatiebeschrijving'] }}"
  },
  "cast": {
    "_expand.zaak._expand.eigenschappen": "jsonToArray"
  }
}
